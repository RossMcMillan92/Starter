!function(a){a(document).ready(function(){Handlebars.registerHelper("eachProperty",function(a,b){var c="";for(var d in a)a.hasOwnProperty(d)&&(c+=b.fn({property:d,value:a[d]}));return c});var b,c=new Date,d=a("#cal").data("filter_id"),e=c.getMonth(),f=c.getFullYear(),g=["January","February","March","April","May","June","July","August","September","October","November","December"],h={},i=a("#calendar-template").html();i=i.replace(/\"\/{{/g,'"{{');var j=Handlebars.compile(i),k=a(".calendar-table > tbody"),l=a(".calendar-month"),m=a(".calendar-loader");a(".calendar-next-month").on("click",function(){e++,e>11&&(e=0,f++),a(".calendar-loading").addClass("show"),n(e,f),PROJ.calendarSetup()}),a(".calendar-previous-month").on("click",function(){e--,0>e&&(e=11,f--),n(e,f),PROJ.calendarSetup()}),a(".filter_time, .filter_access").on("click",function(){a(".calendar-loading").addClass("show"),n(e,f)});var n=function(c,e){if("undefined"!=typeof b&&b.abort(),l.html(g[c]+" "+e),m.addClass("show"),k.addClass("loading"),c+=1,a('input[name="filter_time"]:checked').val())var f=a('input[name="filter_time"]:checked').map(function(){return a(this).val()}).get();else var f="no";if(a('input[name="filter_access"]:checked').val())var i=a('input[name="filter_access"]:checked').map(function(){return a(this).val()}).get();else var i="no";if(h[e]=h[e]||{},h[e][c]=h[e][c]||{},h[e][c][f]=h[e][c][f]||{},h[e][c][f][i]){var n=j(h[e][c][f][i]);k.html(n),k.removeClass("loading"),m.removeClass("show"),a(".calendar a[rel*=external]").on("click",function(){return window.open(this.href),!1})}else"no"==f&&(f=""),"no"==i&&(i=""),b=a.getJSON("/index.php",{option:"com_productions",view:"fe_calendar",format:"raw",m:c,y:e,ft:f,fa:i,filter_id:d}).done(function(b){""==f&&(f="no"),""==i&&(i="no"),h[e][c][f][i]=b;var d=j(b);k.html(d),k.removeClass("loading"),m.removeClass("show"),a(".calendar a[rel*=external]").on("click",function(){return window.open(this.href),!1}),PROJ.calendarSetup()})};n(e,f)})}(jQuery);